{% extends "clasificador/encabezado.html" %}
{% load static %}
{% block content %}
    <link rel="stylesheet" href="{% static 'css/Page.css' %}">
    <link rel="stylesheet" href="{% static 'css/header.css' %}">
    <link rel="stylesheet" href="{% static 'css/planta.css' %}">
<div class="container">
    <h1>Mis Plantas</h1>
    
    <!-- Contenedor del buscador con icono -->
    <div class="search-container">
        <svg class="search-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <circle cx="11" cy="11" r="8" stroke="#666" stroke-width="2"/>
            <path d="M21 21L16.65 16.65" stroke="#666" stroke-width="2" stroke-linecap="round"/>
        </svg>
        <input type="text" id="searchInput" class="search-bar" placeholder="Buscar plantas...">
    </div>
    
    <div class="stats">
        <div class="stat-card">
            <h3>Total de plantas</h3>
            <div class="number">{{ total_plantas }}</div>
        </div>
        <div class="stat-card healthy">
            <h3>Saludables</h3>
            <div class="number">{{ plantas_saludables }}</div>
        </div>
        <div class="stat-card attention">
            <h3>Requieren atenci칩n</h3>
            <div class="number">{{ plantas_atencion }}</div>
        </div>
    </div>
    <div class="plant-grid" id="plantGrid">
        {% for planta in plantas %}
        <div class="plant-card {% if planta.estado == 0 or planta.estado == 2 %}attention{% endif %}" data-name="{{ planta.especie.nombre|lower }} {{ planta.apodo|lower }}">
            <h3>
                {{ planta.especie.nombre }}
                {% if planta.apodo %}<small>({{ planta.apodo }})</small>{% endif %}
            </h3>
            <div class="plant-image">
                {% if planta.especie.imagen_url %}
                    <img src="{{ planta.especie.imagen_url }}" alt="{{ planta.especie.nombre }}">
                {% else %}
                    <img src="{% static 'images/placeholder-plant.jpg' %}" alt="{{ planta.especie.nombre }}">
                {% endif %}
            </div>
            <div class="plant-info">
                {% if planta.ubicacion %}
                    <p><strong>游늸 Ubicaci칩n:</strong> {{ planta.ubicacion }}</p>
                {% endif %}
                <p><strong>游릭 Verde:</strong> {{ planta.porcentaje_verde|floatformat:1 }}%</p>
                <p><strong>游리 Amarillo:</strong> {{ planta.porcentaje_amarillo|floatformat:1 }}%</p>
                <p><strong>游릯 Marr칩n:</strong> {{ planta.porcentaje_marron|floatformat:1 }}%</p>
            </div>
            <div class="plant-status">
                Estado: {{ planta.get_estado_display }}
            </div>
            <div class="plant-description" style="margin: 10px 0; font-size: 13px; color: #666;">
                {{ planta.descripcion_estado|default:"Sin an치lisis reciente" }}
            </div>
            <div class="plant-actions">
                <a href="{% url 'detalle_planta' planta.id %}" class="btn-view">Ver detalles</a>
            </div>
        </div>
        {% empty %}
        <p class="no-plants">No tienes plantas registradas a칰n. 춰Captura tu primera planta!</p>
        {% endfor %}
    </div>
</div>
    
<script src="{% static 'Js/detalle.js' %}"></script>
{% endblock content %}