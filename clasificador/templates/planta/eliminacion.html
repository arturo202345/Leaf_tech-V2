{% extends "clasificador/encabezado.html" %}
{% load static %}
{% block content %}
<link rel="stylesheet" href="{% static 'css/planta.css' %}">
<link rel="stylesheet" href="{% static 'css/eliminar.css' %}">

<div class="modal-overlay">
    <div class="modal-card">
        <button type="button" class="modal-close" onclick="window.location.href='{% url 'detalle_planta' planta.id %}'">&times;</button>
        
        <div class="modal-content">
            <div class="modal-icon">‚ö†Ô∏è</div>
            
            <h1 class="modal-title">¬øEliminar esta planta?</h1>
            <p class="planta-nombre">{{ planta.nombre }}</p>
            
            <div class="planta-preview">
                <div class="preview-image">
                    {% if planta.ImagenURL %}
                        <img src="{{ planta.ImagenURL }}" alt="{{ planta.nombre }}">
                    {% else %}
                        <img src="{% static 'images/placeholder-plant.jpg' %}" alt="{{ planta.nombre }}">
                    {% endif %}
                </div>
                <div class="warning-box">
                    <span class="warning-box-icon">üîí</span>
                    <p>Esta acci√≥n eliminar√° permanentemente la planta y todos sus datos asociados.</p>
                </div>
            </div>
            
            <p class="warning-message">‚ö° Esta acci√≥n no se puede deshacer</p>
            
            <div class="modal-actions">
                <a href="{% url 'detalle_planta' planta.id %}" class="btn-modal btn-cancelar">
                    ‚Üê Cancelar
                </a>
                <form method="POST" style="flex: 1; display: flex;">
                    {% csrf_token %}
                    <button type="submit" class="btn-modal btn-eliminar">
                        üóëÔ∏è S√≠, eliminar
                    </button>
                </form>
            </div>
        </div>
    </div>
</div>

<script>
// Cerrar modal con tecla ESC
document.addEventListener('keydown', function(e) {
    if (e.key === 'Escape') {
        window.location.href = '{% url "detalle_planta" planta.id %}';
    }
});

// Cerrar modal al hacer clic fuera
document.querySelector('.modal-overlay').addEventListener('click', function(e) {
    if (e.target === this) {
        window.location.href = '{% url "detalle_planta" planta.id %}';
    }
});
</script>

{% endblock content %}